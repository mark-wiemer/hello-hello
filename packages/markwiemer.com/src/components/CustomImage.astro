---
import { Image } from "astro:assets";

interface Props {
  src: any; // ImageMetadata
  alt: string;
  /** defaults to false */
  eager?: boolean;
  /** number between 0 and 1 (defaults to 1) */
  widthFraction: number;
  klass?: string;
}

const { src, alt, klass } = Astro.props;
const eager = !!Astro.props.eager;
const widthFraction = Astro.props.widthFraction;
const width = src.width;
const height = src.height;
const aspectRatio = width / height;
---

<Image
  src={src}
  alt={alt}
  width={width}
  height={height}
  loading={eager ? "eager" : "lazy"}
  style={`
    aspect-ratio: ${aspectRatio};
    width: ${widthFraction * 100}%;
    height: auto;
  `}
  class={klass}
/>
